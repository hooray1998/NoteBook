网关是路由器的一个端口
路由器每个端口连接一个局域网，端口的IP和局域网是同一个网段
一般路由器会有一个外网端口，和多个内网端口

另一种比喻更加恰当：**路由器是一台设备，它有五个网口或者网卡，相当于有五只手，分别连着五个局域网。每只手的IP地址都和局域网的IP地址相同的网段，每只手都是它握住的那个局域网的网关。**

访问其他IP的时候，场景如下：
1. 如果是同一个网段， 直接arp获取MAC， 然后发过去
2. 如果不是同一个网段， 先发给网关Gateway

- 静态路由：
	- 路由表：目标网段、对应的端口、下一条的IP
- 动态路由


MAC地址是在局域网中使用的， 如果切换了局域网， MAC地址就一定会变化

网关的分类：
1. 不改变IP的网关 -》 转发网关   “欧洲十国游”
2. 改变IP的网关-》NAT网关 “玄奘西行”


**总结**：
1. 如果要离开局域网， 就要经过网关， 网关是路由器的一个网口
2. 路由器是个三层设备， 里面有如何找到下一跳的规则--路由表


遗留问题：


1.  当在你家里要访问163网站的时候，你的包需要NAT成为公网IP，返回的包又要NAT成你的私有IP，返回包怎么知道这是你的请求呢？它怎么就这么智能的NAT成了你的IP而非别人的IP呢？
2.  对于路由规则，这一节讲述了静态路由，需要手动配置，如果要自动配置，你觉得应该怎么办呢？
